var MiniHeader;(function(n){function kr(){if(pMMUtils&&typeof pMMUtils!="undefined"&&typeof pMMUtils.gebc=="function"&&typeof pMMUtils.gfbc=="function"&&typeof pMMUtils.sa=="function"&&typeof pMMUtils.r=="function"&&typeof pMMUtils.ib=="function"&&typeof pMMUtils.so=="function"&&typeof pMMUtils.sdt=="function"&&typeof pMMUtils.goh=="function"&&typeof pMMUtils.rc=="function"&&typeof pMMUtils.gs=="function")t=pMMUtils;else{t=null;return}if(h&&h.lastChild&&GetScrollTop){if(tu(),ft=!0,g){var n=t.gebc("b_scopebar",_d);n&&n.length>0&&(p=n[0])}sj_be(_w,"unload",bt);sj_evt.bind("ajax.unload",bt);sj_evt.bind("ajax.load",gi);y&&sj_be(y,"click",hr);gr();nr();ir();ur();dr()}}function dr(){var r=h.getBoundingClientRect(),i,n;if(r.bottom<=0&&t)for(i=_d.querySelectorAll("#miniheader a, #miniheader input"),n=0;n<i.length;n++)t.sa(i[n],"tabindex","-1")}function gi(){nr();ir();ur();a=_ge(vi);nt=_ge(li);w=_ge(ci)}function nr(){typeof MhConfig!="undefined"&&MhConfig&&(MhConfig.is!=null&&(lt=MhConfig.is),MhConfig.sbfc!=null&&(yi=MhConfig.sbfc),MhConfig.edsfs!=null&&(wi=MhConfig.edsfs),MhConfig.psfdss!=null&&(bi=MhConfig.psfdss),MhConfig.ucrs!=null&&(ki=MhConfig.ucrs),MhConfig.epaos!=null&&(di=MhConfig.epaos))}function gr(){var n,r;if(t)for(n=0;n<i.length;n++)r=t.ga(i[n],"type"),r&&(gt[r]=n)}function tr(n){for(var t=n,i=0;t;)i+=t.offsetTop,t=t.parentElement;return i}function ir(){var r=_ge("rfPane"),f=_ge("vsb_vid_cat"),e=_ge("vm_c"),n;di&&e?b=e.offsetTop:f?b=tr(f):r?b=tr(r):(n=_ge("b_header"),b=n?n.clientHeight:0);var o=rr(),i=t.gcs(h.querySelector("table")),s=i&&!isNaN(parseInt(i.height))?parseInt(i.height):0;v=[0];v[u.Hide]=-(o+s+yr);v[u.Pinned]=-o;v[u.Expand]=0}function rr(){var r=0,n,i;return p&&t&&(n=t.gcs(p),n&&(i=parseInt(n.height),r=isNaN(i)?0:i)),r}function ur(){if(t){if(f&&(k=f.querySelector('[name="form"]'),ni=k?k.value:""),r=0,lt==u.Pinned)t.sa(h,"aria-hidden",!1),sj_be(_w,"scroll",sr),fr(),it(u.Pinned);else if(lt==u.Hide){t.sa(h,"aria-hidden",!0);sj_be(_w,"scroll",yt);it(u.Hide);var n=GetScrollTop();n>b?(fi(),typeof MiniHdrImgLoader=="undefined"||MiniHdrImgLoader===null||MiniHdrImgLoader.LoadThumbnail(r)):pt();et=n}i.length>0&&(t.so(i[r],1),t.sdt(i[r],DisplayType.Block));t.sdt(h,DisplayType.Block)}}function nu(){var n,i,r,u;t&&(n=_ge("miniheader_logo"),i=t.gfbc("b_searchboxForm"),ki&&n&&i&&(r=n.firstChild,u=i.firstChild,r&&u&&(t.r(n,r),t.ib(i,r,u))),h&&d&&(d.style.display="none",n&&(n.style.visibility="hidden")))}function tu(){var n,i,r;s!=null&&o!=null&&f!=null&&t&&(n=t.ga(s,"data-query-override"),o!=null&&n&&(o.value=n),i=t.ga(s,"data-target-override"),f!=null&&i&&t.sa(f,"target",i),r=t.ga(s,"data-action-override"),f!=null&&r&&t.sa(f,"action",r))}function fr(){ot&&(sb_ct(ot),ot=null);f&&s&&(s.style.visibility="visible",k&&(k.value=yi),a=ri(f,s,vi,!1,!0,vr),e&&a&&e.parentNode&&a.parentNode&&e.parentNode===a.parentNode&&(nt=ri(e,s,li,!0)),o&&(e&&sj_be(e,"mousedown",at),st&&sj_be(st,"mousedown",at),sj_be(o,"focus",er),sj_be(o,"blur",vt)));p&&g&&(w=ri(p,g,ci));nu();iu()}function iu(){v[u.Pinned]=-rr()}function at(){sj_ue(o,"blur",vt)}function er(){o&&t&&(ct&&(sb_ct(ct),ct=null),sj_evt.fire(n.SearchBoxEvent[n.SearchBoxEvent.SearchBoxStatusChange],n.SearchBoxStatus.Focus),t.ac(o,"focus"),t.ac(h,"sb-focused"),e&&e.firstChild&&t.sdt&&t.sdt(e.firstChild,DisplayType.Block))}function or(){o&&o.blur()}function vt(){t&&(e&&e.firstChild&&t.goh(e.firstChild)>0&&t.sdt(e.firstChild,DisplayType.Default),sj_evt.fire(n.SearchBoxEvent[n.SearchBoxEvent.SearchBoxStatusChange],n.SearchBoxStatus.Blur),ct=sb_st(function(){t.rc(o,"focus");t.rc(h,"sb-focused")},wr))}function ri(n,t,i,r,u,f){r===void 0&&(r=!1);u===void 0&&(u=!1);f===void 0&&(f=null);var e=sj_ce("span",i);return n.parentNode&&n.parentNode.replaceChild(e,n),!t.firstChild||r&&t.firstElementChild.id!==n.id||u&&t.firstElementChild.id===f?t.appendChild(n):t.firstChild.parentNode.replaceChild(n,t.firstChild),e}function ru(){while(s.children.length>0)s.removeChild(s.lastChild)}function uu(){if(cr(),f&&a&&t){if(k&&ni&&(k.value=ni),s.style.visibility="hidden",s.firstChild){var n=t.gebc("b_searchboxForm",f);n&&n.length>0&&s.replaceChild(n[0].cloneNode(!0),s.firstChild)}a.parentNode&&a.parentNode.replaceChild(f,a);e&&nt&&nt.parentNode&&nt.parentNode.replaceChild(e,nt)}p&&w&&g.firstChild&&(g.replaceChild(w.cloneNode(!0),g.firstChild),w.parentNode&&w.parentNode.replaceChild(p,w));ot=sb_st(function(){ot=null;ru()},1e3)}function sr(){var n=GetScrollTop(),t=n-et;Math.abs(t)<=pi||(or(),et=n)}function yt(){var t=GetScrollTop(),i=t-et,n,f;Math.abs(i)<=pi||(or(),t>b?(fi(),i>0?ut==u.Expand&&it(u.Pinned):i<0&&ut==u.Pinned&&it(u.Expand),n=fu(t),typeof MiniHdrImgLoader=="undefined"||MiniHdrImgLoader===null||MiniHdrImgLoader.LoadThumbnail(n),n!==c&&(f=n>c?"down":"up",c=n,wt(c),dt("Change",{Direction:f},l[c]?l[c]:""))):(pt(),r!=0&&(c=0,wt(0))),et=t)}function fu(n){var i,t;if(rt.length>1){for(i=0,t=1;t<rt.length;t++){if(rt[t]>n)return i;i=t}return i}return wi?Math.min(Math.floor(n/bi),ar):0}function eu(n){return gt[l[n]]?gt[l[n]]:n}function hr(){var n=(r+1)%i.length;dt("Click",{Component:"dsselector"},l[n]?l[n]:"",!0);wt(n)}function it(i){t.smt(h,v[i]);ut=i;n.visibleHeight=v[i]-v[u.Hide]}function fi(){ut==u.Hide&&t&&(d&&(d.style.display="none",f&&(f.style.top="-25px")),t.sa(h,"aria-hidden",!1),kt(i[r],!0),ei(r),fr(),it(u.Pinned),ui=sb_gt(),dt("Show",null,l[r]?l[r]:""),sj_evt.fire(n.MiniHeaderEvent[n.MiniHeaderEvent.ShowMiniHeader]))}function pt(){ut!=u.Hide&&t&&(d&&(d.style.display="flex",f&&(f.style.top="0px")),t.sa(h,"aria-hidden",!0),kt(i[r],!1),it(u.Hide),uu(),ui&&dt("Hide",{Duration:sb_gt()-ui}),sj_evt.fire(n.MiniHeaderEvent[n.MiniHeaderEvent.HideMiniHeader]))}function ou(){if(!ti&&!ft){var n=GetScrollTop();n>b&&fi();sj_be(_w,"scroll",yt);ft=!0}}function su(){!ti&&ft&&(pt(),sj_ue(_w,"scroll",yt),ft=!1)}function wt(n){if(i.length>n&&t&&t.gs(i[n],"display")!="block")if(kt(i[r],!1),kt(i[n],!0),typeof ii!="undefined"&&ii){var u=i[r],f=i[n];t.sdt(i[n],DisplayType.Block);n>r?MMCssAnim.animate(u,f,"up"):MMCssAnim.animate(u,f,"down");setTimeout(function(){ei(n);t.sdt(i[r],DisplayType.Default);r=n},500)}else MMAnim.fadeOut(i[r],10),MMAnim.fadeIn(i[n],10,"block",function(){ei(n);t.sdt(i[r],DisplayType.Default);r=n})}function ei(n){if(y&&t){tt||(tt=t.gebc("indic",y));tt.length>r&&tt.length>n&&(t.rc(tt[r],"sel"),t.ac(tt[n],"sel"));var f=(n+1)%i.length,u=t.gebc("lt",i[f]);u&&u.length>0&&t.sa(y,"title",u[0].innerHTML)}}function bt(){sj_ue(_w,"unload",bt);sj_evt.unbind("ajax.unload",bt);sj_evt.unbind("ajax.load",gi);sj_ue(_w,"scroll",yt);sj_ue(_w,"scroll",sr);y&&sj_ue(y,"click",hr);o&&vt();lt==u.Hide?pt():f&&ai&&t&&t.a(ai,f);ti=!0;cr()}function cr(){o&&(e&&sj_ue(e,"mousedown",at),st&&sj_ue(st,"mousedown",at),sj_ue(o,"focus",er),sj_ue(o,"blur",vt))}function kt(n,i){n&&t&&t.ga(n,"data-tag")&&t.sa(n,"data-tag","multimedia.miniHeaderData"+(i?"Visible":""))}function dt(n,t,i,r){if(br||r){var u=i?i:n;oi[u]||(i&&(t||(t={}),t.Dataset=i),lr.logEvent(null,"CI."+n,null,"miniheader",t,null),oi[u]=!0)}}function hu(n,t){var i,r;ht[n]||(ht[n]=rt.length);t=t+(si?si.offsetTop:0)+pr;i=ht[n];rt[i]=t;l[i]=n;r=GetScrollTop();r>t&&(c=ht[n],wt(eu(c)))}var t=typeof pMMUtils!="undefined"?pMMUtils:null,lr=pInstr,h=_ge("miniheader"),hi=_ge("miniheader_data"),d=_ge("tallhead"),i=hi?hi.children:[],ar=i.length,y=_ge("miniheader_switch"),g=_ge("miniheader_scope"),p,s=_ge("miniheader_searchbox"),w,ci="scope_pl",nt,li="as_pl",e=_ge("sw_as"),o=_ge("sb_form_q"),st=_ge("sb_form_go"),rt=[0],l=["RelatedSearch"],gt={},ht={},r,ut,u,ot,c,ui,oi,si;(function(n){n[n.Hide=0]="Hide";n[n.Pinned=1]="Pinned";n[n.Expand=2]="Expand"})(u||(u={}));var v,f=_ge("sb_form"),ai=f?f.parentNode:null,a,vi="search_pl",vr="mnh_sbc",b=0,ft;n.visibleHeight=0;var ni,yi="QBIRMH",k,yr=10,pr=75,tt,pi=30,wr=300,ct,br=!1,ti=!1,et=0,lt=u.Hide,wi=!1,bi=1e3,ki=!1,di=!1,ii;typeof MMCssAnim!="undefined"&&MMCssAnim&&(ii=MMCssAnim);n.init=kr;c=0;n.enable=ou;n.disable=su;oi={};si=_ge("vm_res")||_ge("vm_c");n.registerInlineBlock=hu})(MiniHeader||(MiniHeader={}));MiniHeader.init()